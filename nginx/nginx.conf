worker_processes auto;
events { worker_connections 1024; }

http {
  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;
  
  # WebSocket support
  map $http_upgrade $connection_upgrade {
    default upgrade;
    ''      close;
  }
  
  upstream app {
    server springboot:8080;
    server grafana:3000;
  }
  
  # Load server configurations from conf.d
  include /etc/nginx/conf.d/*.conf;

  # HTTPS 설정(SSL 인증서가 있을 경우)
  # server {
  #   listen 443 ssl;
  #   ssl_certificate     /etc/nginx/certs/fullchain.pem;
  #   ssl_certificate_key /etc/nginx/certs/privkey.pem;
  #   include             /etc/nginx/certs/options-ssl-nginx.conf;
  #   ssl_dhparam         /etc/nginx/certs/ssl-dhparams.pem;
  #   …위와 동일한 location / 설정…
  # }
}