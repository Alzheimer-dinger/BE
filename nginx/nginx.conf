worker_processes auto;
events { worker_connections 1024; }

http {
  upstream app {
    server springboot:8080;
  }

  server {
    listen 80;
    server_name _;  # 또는 your.domain.com

    # 기본 요청을 Spring Boot로 프록시
    location / {
      proxy_pass         http://app;
      proxy_set_header   Host $host;
      proxy_set_header   X-Real-IP $remote_addr;
      proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_http_version 1.1;
      proxy_set_header   Connection "";
    }

    # Swagger UI 경로만 별도 매핑할 필요는 없지만, 필요 시:
    location /swagger-ui.html {
      proxy_pass http://app/swagger-ui.html;
    }
  }

  # HTTPS 설정(SSL 인증서가 있을 경우)
  # server {
  #   listen 443 ssl;
  #   ssl_certificate     /etc/nginx/certs/fullchain.pem;
  #   ssl_certificate_key /etc/nginx/certs/privkey.pem;
  #   include             /etc/nginx/certs/options-ssl-nginx.conf;
  #   ssl_dhparam         /etc/nginx/certs/ssl-dhparams.pem;
  #   …위와 동일한 location / 설정…
  # }
}